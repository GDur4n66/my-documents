```mermaid
sequenceDiagram
    participant ノード
    participant ウォレット
    participant Nostrクライアント
    participant LNURLサーバ
    participant Zapperノード

    Nostrクライアント->>LNURLサーバ: LUD06 GET request

    LNURLサーバ->>Nostrクライアント: LUD06 JSON response
    Note left of LNURLサーバ: allowsNostr : true <br/>nostrPubkey : Zapper Pubkey
    
    Nostrクライアント->>LNURLサーバ: LUD06 GET request (call back)
    Note right of Nostrクライアント: Zap request event(kind:9734)
    
    LNURLサーバ->>Zapperノード: API request addInvoice
    
    Zapperノード->>LNURLサーバ: API response
    Note left of Zapperノード: Zap Invoice
    
    LNURLサーバ->>Nostrクライアント: LUD06 JSON response (callback)
    Note left of LNURLサーバ: Zap Invoice

    Nostrクライアント->>ウォレット: (コピペなど)
    Note left of Nostrクライアント: Zap Invoice

    ウォレット->>ノード: API payInvoice
    Note left of ウォレット: Zap Invoice

    ノード->>Zapperノード: 送金
    
    Zapperノード->>Nostrクライアント: Zap note(kind:9735)

```
